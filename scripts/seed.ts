import { PrismaClient } from '@prisma/client'

const prisma = new PrismaClient()

async function main() {
  console.log('üå± Iniciando seed do banco de dados...')

  // Limpar dados existentes
  await prisma.protocol.deleteMany()
  await prisma.durableItem.deleteMany()
  await prisma.consumableItem.deleteMany()
  await prisma.substrate.deleteMany()
  await prisma.growParameter.deleteMany()
  await prisma.cultureType.deleteMany()
  await prisma.strain.deleteMany()

  console.log('üßπ Dados existentes removidos')

  // 1. Criar Strains (Cepas)
  const strains = await Promise.all([
    prisma.strain.create({
      data: {
        name: 'Pleurotus ostreatus - Cepa A',
        species: 'Pleurotus ostreatus',
        description: 'Cepa comercial de shimeji branco, alta produtividade',
        origin: 'Laborat√≥rio de Micologia - UFSC',
        characteristics: JSON.stringify(['alta produtividade', 'resistente a contamina√ß√£o', 'colora√ß√£o branca'])
      }
    }),
    prisma.strain.create({
      data: {
        name: 'Ganoderma lucidum - Cepa Premium',
        species: 'Ganoderma lucidum',
        description: 'Cepa de reishi com alta concentra√ß√£o de triterpenos',
        origin: 'Instituto de Biotecnologia - USP',
        characteristics: JSON.stringify(['alta concentra√ß√£o de triterpenos', 'crescimento lento', 'colora√ß√£o vermelha'])
      }
    }),
    prisma.strain.create({
      data: {
        name: 'Lentinula edodes - Cepa B',
        species: 'Lentinula edodes',
        description: 'Cepa de shiitake adaptada ao clima brasileiro',
        origin: 'EMBRAPA',
        characteristics: JSON.stringify(['adaptada ao clima tropical', 'textura firme', 'sabor intenso'])
      }
    }),
    prisma.strain.create({
      data: {
        name: 'Agaricus bisporus - Cepa H√≠brida',
        species: 'Agaricus bisporus',
        description: 'Cepa h√≠brida de champignon com melhor rendimento',
        origin: 'Laborat√≥rio Privado - SP',
        characteristics: JSON.stringify(['rendimento superior', 'resist√™ncia a doen√ßas', 'colora√ß√£o branca'])
      }
    })
  ])

  console.log(`‚úÖ ${strains.length} cepas criadas`)

  // 2. Criar Culture Types (Tipos de Cultura)
  const cultureTypes = await Promise.all([
    prisma.cultureType.create({
      data: {
        name: 'Cultura de Pleurotus',
        description: 'Protocolo padr√£o para cultivo de Pleurotus ostreatus',
        medium: 'PDA',
        temperature: 25,
        humidity: 85,
        ph: 6.5
      }
    }),
    prisma.cultureType.create({
      data: {
        name: 'Cultura de Ganoderma',
        description: 'Protocolo especializado para Ganoderma lucidum',
        medium: 'MEA',
        temperature: 28,
        humidity: 90,
        ph: 7.0
      }
    }),
    prisma.cultureType.create({
      data: {
        name: 'Cultura de Shiitake',
        description: 'Protocolo para Lentinula edodes em serragem',
        medium: 'Sabouraud',
        temperature: 24,
        humidity: 80,
        ph: 6.0
      }
    }),
    prisma.cultureType.create({
      data: {
        name: 'Cultura de Champignon',
        description: 'Protocolo tradicional para Agaricus bisporus',
        medium: 'PDA',
        temperature: 22,
        humidity: 75,
        ph: 7.5
      }
    })
  ])

  console.log(`‚úÖ ${cultureTypes.length} tipos de cultura criados`)

  // 3. Criar Grow Parameters (Par√¢metros de Crescimento)
  const growParameters = await Promise.all([
    prisma.growParameter.create({
      data: {
        name: 'Temperatura de Crescimento',
        type: 'temperatura',
        unit: '¬∞C',
        minValue: 20,
        optimalValue: 25,
        maxValue: 30,
        description: 'Temperatura ideal para crescimento micelial'
      }
    }),
    prisma.growParameter.create({
      data: {
        name: 'Umidade Relativa',
        type: 'umidade',
        unit: '%',
        minValue: 70,
        optimalValue: 85,
        maxValue: 95,
        description: 'Umidade relativa do ar para desenvolvimento'
      }
    }),
    prisma.growParameter.create({
      data: {
        name: 'pH do Substrato',
        type: 'ph',
        unit: 'pH',
        minValue: 5.5,
        optimalValue: 6.5,
        maxValue: 7.5,
        description: 'pH ideal do substrato de cultivo'
      }
    }),
    prisma.growParameter.create({
      data: {
        name: 'Intensidade Luminosa',
        type: 'luz',
        unit: 'lux',
        minValue: 100,
        optimalValue: 500,
        maxValue: 1000,
        description: 'Intensidade luminosa para forma√ß√£o de corpos frut√≠feros'
      }
    }),
    prisma.growParameter.create({
      data: {
        name: 'Concentra√ß√£o de CO2',
        type: 'gas',
        unit: 'ppm',
        minValue: 400,
        optimalValue: 800,
        maxValue: 1200,
        description: 'Concentra√ß√£o de CO2 para desenvolvimento'
      }
    })
  ])

  console.log(`‚úÖ ${growParameters.length} par√¢metros de crescimento criados`)

  // 4. Criar Substrates (Substratos)
  const substrates = await Promise.all([
    prisma.substrate.create({
      data: {
        name: 'Serragem de Eucalipto',
        type: 'org√¢nico',
        composition: 'Celulose 45%, Lignina 30%, Hemicelulose 20%, Minerais 5%',
        ph: 6.2,
        nutrients: JSON.stringify(['nitrog√™nio', 'f√≥sforo', 'pot√°ssio', 'magn√©sio', 'c√°lcio']),
        description: 'Substrato padr√£o para cultivo de cogumelos'
      }
    }),
    prisma.substrate.create({
      data: {
        name: 'Palha de Arroz',
        type: 'org√¢nico',
        composition: 'Celulose 35%, Lignina 15%, Hemicelulose 25%, Sil√≠cio 20%',
        ph: 7.0,
        nutrients: JSON.stringify(['sil√≠cio', 'nitrog√™nio', 'f√≥sforo', 'pot√°ssio']),
        description: 'Substrato rico em sil√≠cio para cultivo especializado'
      }
    }),
    prisma.substrate.create({
      data: {
        name: 'Casca de Caf√©',
        type: 'org√¢nico',
        composition: 'Celulose 40%, Lignina 25%, Cafe√≠na 2%, Minerais 15%',
        ph: 5.8,
        nutrients: JSON.stringify(['nitrog√™nio', 'f√≥sforo', 'pot√°ssio', 'cafe√≠na']),
        description: 'Substrato com propriedades estimulantes naturais'
      }
    }),
    prisma.substrate.create({
      data: {
        name: 'Substrato Sint√©tico PDA',
        type: 'sint√©tico',
        composition: '√Ågar 1.5%, Dextrose 2%, Batata 20%, √Ågua 76.5%',
        ph: 6.5,
        nutrients: JSON.stringify(['carboidratos', 'vitaminas', 'minerais']),
        description: 'Meio de cultura sint√©tico para isolamento'
      }
    })
  ])

  console.log(`‚úÖ ${substrates.length} substratos criados`)

  // 5. Criar Consumable Items (Itens Consum√≠veis)
  const consumableItems = await Promise.all([
    prisma.consumableItem.create({
      data: {
        name: '√Ågar PDA',
        category: 'meio de cultura',
        unit: 'g',
        supplier: 'Sigma-Aldrich',
        catalogNumber: 'P6366-500G',
        description: '√Ågar Potato Dextrose para cultivo de fungos'
      }
    }),
    prisma.consumableItem.create({
      data: {
        name: '√Ågar MEA',
        category: 'meio de cultura',
        unit: 'g',
        supplier: 'Merck',
        catalogNumber: '1.05463.0500',
        description: '√Ågar Malt Extract para isolamento de fungos'
      }
    }),
    prisma.consumableItem.create({
      data: {
        name: 'Placas Petri',
        category: 'equipamento descart√°vel',
        unit: 'unidades',
        supplier: 'Corning',
        catalogNumber: '430166',
        description: 'Placas Petri est√©reis 90mm'
      }
    }),
    prisma.consumableItem.create({
      data: {
        name: 'Algod√£o Hidr√≥fobo',
        category: 'material de laborat√≥rio',
        unit: 'g',
        supplier: 'LabSynth',
        catalogNumber: 'LS-001',
        description: 'Algod√£o para tamp√µes de frascos'
      }
    }),
    prisma.consumableItem.create({
      data: {
        name: 'Papel Alum√≠nio',
        category: 'material de laborat√≥rio',
        unit: 'm',
        supplier: 'Local',
        catalogNumber: 'PA-001',
        description: 'Papel alum√≠nio para embalagem'
      }
    })
  ])

  console.log(`‚úÖ ${consumableItems.length} itens consum√≠veis criados`)

  // 6. Criar Durable Items (Itens Dur√°veis)
  const durableItems = await Promise.all([
    prisma.durableItem.create({
      data: {
        name: 'Autoclave Vertical',
        category: 'equipamento',
        brand: 'Phoenix',
        model: 'AV-50',
        serialNumber: 'AV50-2023-001',
        location: 'Laborat√≥rio Principal',
        description: 'Autoclave vertical 50L para esteriliza√ß√£o'
      }
    }),
    prisma.durableItem.create({
      data: {
        name: 'Microsc√≥pio √ìptico',
        category: 'equipamento',
        brand: 'Olympus',
        model: 'CX23',
        serialNumber: 'CX23-2023-002',
        location: 'Laborat√≥rio de An√°lise',
        description: 'Microsc√≥pio √≥ptico para an√°lise morfol√≥gica'
      }
    }),
    prisma.durableItem.create({
      data: {
        name: 'Estufa de Incuba√ß√£o',
        category: 'equipamento',
        brand: 'Thermo Fisher',
        model: 'Heratherm',
        serialNumber: 'HT-2023-003',
        location: 'Sala de Crescimento',
        description: 'Estufa com controle de temperatura e umidade'
      }
    }),
    prisma.durableItem.create({
      data: {
        name: 'Balan√ßa Anal√≠tica',
        category: 'equipamento',
        brand: 'Mettler Toledo',
        model: 'XS205',
        serialNumber: 'XS205-2023-004',
        location: 'Laborat√≥rio Principal',
        description: 'Balan√ßa anal√≠tica com precis√£o de 0.01mg'
      }
    }),
    prisma.durableItem.create({
      data: {
        name: 'pHmetro Port√°til',
        category: 'equipamento',
        brand: 'Hanna Instruments',
        model: 'HI98128',
        serialNumber: 'HI98128-2023-005',
        location: 'Laborat√≥rio Principal',
        description: 'Medidor de pH port√°til com compensa√ß√£o de temperatura'
      }
    })
  ])

  console.log(`‚úÖ ${durableItems.length} itens dur√°veis criados`)

  // 7. Criar Protocols (Protocolos)
  const protocols = await Promise.all([
    prisma.protocol.create({
      data: {
        name: 'Inocula√ß√£o de Substrato',
        type: 'inocula√ß√£o',
        steps: JSON.stringify([
          'Esterilizar substrato em autoclave a 121¬∞C por 60min',
          'Resfriar substrato at√© temperatura ambiente',
          'Preparar in√≥culo em condi√ß√µes ass√©pticas',
          'Inocular substrato com 5% de in√≥culo',
          'Misturar uniformemente',
          'Acondicionar em sacos pl√°sticos',
          'Incubar a 25¬∞C por 15 dias'
        ]),
        duration: 60,
        temperature: 25,
        equipment: JSON.stringify(['autoclave', 'balan√ßa', 'pHmetro', 'estufa']),
        materials: JSON.stringify(['substrato', 'in√≥culo', 'sacos pl√°sticos', 'algod√£o']),
        description: 'Protocolo padr√£o para inocula√ß√£o de substrato com mic√©lio'
      }
    }),
    prisma.protocol.create({
      data: {
        name: 'Transfer√™ncia de Cultura',
        type: 'transfer√™ncia',
        steps: JSON.stringify([
          'Preparar meio de cultura est√©ril',
          'Abrir placa fonte em condi√ß√µes ass√©pticas',
          'Selecionar mic√©lio saud√°vel',
          'Transferir fragmento para nova placa',
          'Sellar placa com fita adesiva',
          'Identificar com etiqueta',
          'Incubar a temperatura adequada'
        ]),
        duration: 15,
        temperature: 25,
        equipment: JSON.stringify(['microsc√≥pio', 'bico de Bunsen', 'pin√ßa']),
        materials: JSON.stringify(['placas Petri', 'meio de cultura', 'fita adesiva', 'etiquetas']),
        description: 'Protocolo para transfer√™ncia ass√©ptica de culturas'
      }
    }),
    prisma.protocol.create({
      data: {
        name: 'An√°lise de Contamina√ß√£o',
        type: 'an√°lise',
        steps: JSON.stringify([
          'Coletar amostra representativa',
          'Preparar suspens√£o em solu√ß√£o salina',
          'Fazer dilui√ß√µes seriadas',
          'Semear em placas de √°gar',
          'Incubar por 48-72h',
          'Contar col√¥nias',
          'Calcular UFC/g de substrato'
        ]),
        duration: 180,
        temperature: 30,
        equipment: JSON.stringify(['microsc√≥pio', 'pipetas', 'estufa', 'contador de col√¥nias']),
        materials: JSON.stringify(['placas Petri', 'solu√ß√£o salina', 'meio de cultura']),
        description: 'Protocolo para an√°lise microbiol√≥gica de contamina√ß√£o'
      }
    }),
    prisma.protocol.create({
      data: {
        name: 'Colheita de Cogumelos',
        type: 'colheita',
        steps: JSON.stringify([
          'Identificar est√°gio ideal de colheita',
          'Higienizar m√£os e equipamentos',
          'Colher cogumelos com cuidado',
          'Remover substrato aderido',
          'Classificar por tamanho e qualidade',
          'Acondicionar em embalagens adequadas',
          'Armazenar em temperatura controlada'
        ]),
        duration: 30,
        temperature: 15,
        equipment: JSON.stringify(['balan√ßa', 'term√¥metro', 'refrigerador']),
        materials: JSON.stringify(['embalagens', 'etiquetas', 'papel absorvente']),
        description: 'Protocolo para colheita e p√≥s-colheita de cogumelos'
      }
    })
  ])

  console.log(`‚úÖ ${protocols.length} protocolos criados`)

  console.log('üéâ Seed conclu√≠do com sucesso!')
  console.log(`üìä Resumo:`)
  console.log(`   - ${strains.length} cepas`)
  console.log(`   - ${cultureTypes.length} tipos de cultura`)
  console.log(`   - ${growParameters.length} par√¢metros de crescimento`)
  console.log(`   - ${substrates.length} substratos`)
  console.log(`   - ${consumableItems.length} itens consum√≠veis`)
  console.log(`   - ${durableItems.length} itens dur√°veis`)
  console.log(`   - ${protocols.length} protocolos`)
}

main()
  .catch((e) => {
    console.error('‚ùå Erro durante o seed:', e)
    process.exit(1)
  })
  .finally(async () => {
    await prisma.$disconnect()
  })
